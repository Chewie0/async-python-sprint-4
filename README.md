# Проектное задание четвёртого спринта
Реализован http-сервис, который обрабатывает поступающие запросы. Сервер стартует по адресу `http://127.0.0.1:8080`.

Перед запуском проекта необходимо установить СУБД PostgreSQL, создать там пользователя и базу и указать учетные данные для входа в переменные среды 
`DB_DSN=postgresql+asyncpg://{user}:{password}@{ip}:{port}/{db_name}`.
Далее выполнить миграции
`alembic upgrade head`

SwaggerUI: `http://127.0.0.1:8080/api/openapi`.

<details>
<summary> Список эндпойнтов</summary>
1. Получить сокращённый вариант переданного URL.

```python
POST /api/v1/urls/
```
Тело запроса: `{"original_url": "string"}`

Метод принимает в теле запроса строку URL для сокращения и возвращает ответ с кодом `201`.

2. Вернуть оригинальный URL
```python
GET /api/v1/urls/{url_id}
```
Метод принимает в качестве параметра идентификатор сокращенного URL и возвращает ответ с кодом 307 и оригинальным URL в заголовке Location.

3.Возможность "удаления" сохраненного URL. Запись остается, но помечается как удаленная. При попытке получения полного URL возвращать ответ с кодом 410 Gone.
```python
DELETE  /api/v1/urls/{url_id}
```
4.Вернуть статус использования URL
```python
GET /api/v1/urls/{url_id}/status/?[full-info]&&[max-result=10]&&[offset=0]
```
Метод принимает в качестве параметра идентификатор сокращенного URL и возвращает информацию о количестве переходов, совершенных по ссылке.

В ответе может содержится как общее количество совершенных переходов, так и дополнительная детализированная информация о каждом переходе (в зависимости от параметра full-info).

5.Передача ссылок пачками (batch upload)
```python
GET /api/v1/urls/batch/
```
Принимает в теле запроса список URL в формате:
`[
    {
        "original_url": "URL for shorten"
    },
    ...
]
`
6. Пинг доступности базы данных
```python
GET /api/v1/db/ping
```
Возвращает статус `200`, в случае доступности базы и статус `400` в случае ее недоступности. 
</details>



## Дополнительные требования (отметьте [Х] выбранные пункты):

- [x] (1 балл) Реализуйте метод `GET /ping`, который возвращает информацию о статусе доступности БД.
- [x] (1 балл) Реализуйте возможность «удаления» сохранённого URL. Запись должна остаться, но помечаться как удалённая. При попытке получения полного URL возвращать ответ с кодом `410 Gone`.
- [ ] (2 балла) Реализуйте middlware, блокирующий доступ к сервису из запрещённых подсетей (black list).
- [x] (2 балла) Реализуйте возможность передавать ссылки пачками (batch upload).

